FROM node:20-alpine

WORKDIR /app

COPY package*.json ./
COPY prisma ./prisma/

RUN npm ci --only=production && npm cache clean --force

RUN npx prisma generate

CMD echo "ðŸš€ Executando migraÃ§Ãµes do banco de dados..." && \
    npx prisma migrate deploy && \
    echo "âœ… MigraÃ§Ãµes concluÃ­das com sucesso!" 